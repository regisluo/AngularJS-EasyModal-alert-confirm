angular.module("easyModalService",[]).factory("emodal",["$document","$compile","$rootScope","$controller","$timeout",function(l,a,n,e,s){var c={},o={id:null,template:null,templateUrl:null,title:"My Title",backdrop:!0,success:{label:"OK",fn:null,show:!0},cancel:{label:"Cancel",fn:null,show:!1},controller:null,backdropClass:"modal-backdrop",backdropCancel:!0,footerTemplate:null,modalClass:"modal",successCallback:null,cancelCallback:null,successArgs:null,cancelArgs:null,fadetime:null,css:{top:"30%",margin:"0 auto"}},t=l.find("body");return c.modal=function(l,c,d){angular.isObject(l)?(d=c,c=l):c.templateUrl=l,c=angular.extend({},o,c);var u,i=c.successCallback,r=c.cancelCallback,m=c.successArgs,b=c.cancelArgs,g=(c.fadetime,c.id?' id="'+c.id+'" ':""),v='<button class="btn btn-primary" ng-click="$modalSuccess()">{{$modalSuccessLabel}}</button>';(c.cancel.show||r)&&(v+='<button class="btn" ng-click="$modalCancel()">{{$modalCancelLabel}}</button>');var $='<div class="modal-footer">'+(c.footerTemplate||v)+"</div>",C=function(){return c.template?angular.isString(c.template)?'<div class="modal-body">'+c.template+"</div>":'<div class="modal-body">'+c.template.html()+"</div>":'<div class="modal-body" ng-include="\''+c.templateUrl+"'\"></div>"}(),k=angular.element('<div class="'+c.modalClass+' fade"'+g+' style="display: block;">  <div class="modal-dialog">    <div class="modal-content">      <div class="modal-header">        <button type="button" class="close" ng-click="$modalCancel()">&times;</button>        <h2>{{$title}}</h2>      </div>'+C+$+"    </div>  </div></div>");for(u in c.css)k.css(u,c.css[u]);var p="<div ";c.backdropCancel&&(p+='ng-click="$modalCancel()"'),p+="/>";var f=angular.element(p);f.addClass(c.backdropClass),f.addClass("fade in");var y=function(l){27===l.keyCode&&h.$modalCancel()},S=function(){t.unbind("keydown",y),k.remove(),c.backdrop&&f.remove()};t.bind("keydown",y);var L,w,h=c.scope||n.$new();h.$title=c.title,h.$modalClose=S,h.$modalCancel=function(){var l=c.cancel.fn||S;l.call(this),r&&r.call(null,b),h.$modalClose()},h.$modalSuccess=function(){var l=c.success.fn||S;l.call(this),i&&i.call(null,m),h.$modalClose()},h.$modalSuccessLabel=c.success.label,h.$modalCancelLabel=c.cancel.label,c.controller&&(w=angular.extend({$scope:h},d),L=e(c.controller,w),k.contents().data("$ngControllerController",L)),a(k)(h),a(f)(h),t.append(k),c.backdrop&&t.append(f),s(function(){k.addClass("in")},200)},c.alert=function(){var l='<div class="modal-body"><div class="alert alert-info">'+arguments[0]+"</div></div>",e='<div class="modal-footer"><button class="btn btn-primary" ng-click="$modalSuccess()">{{$modalSuccessLabel}}</button></div>',c=angular.element('<div class="modal modal-body" style="display: block;"><div class="modal-dialog modal-sm"><div class="modal-content">'+l+e+"</div></div></div>"),o=null,d=arguments[0].scope||n.$new(),u=function(){t.unbind("keydown",i),c.remove()};d.$modalClose=u,angular.isString(arguments[1])?o=arguments[1]:angular.isNumber(arguments[1])&&s(function(){d.$modalClose()},arguments[1]),angular.isNumber(arguments[2])&&s(function(){d.$modalClose()},arguments[2]);var i=function(l){27===l.keyCode&&d.$modalClose()};t.bind("keydown",i),d.$modalSuccess=function(){d.$modalClose()},d.$modalSuccessLabel=null==o?"OK":o,a(c)(d),t.append(c)},c.confirm=function(){var l='<div class="modal-body"><div class="alert alert-info">'+(angular.isString(arguments[0])?arguments[0]:"")+"</div></div>",e='<div class="modal-footer"><button class="btn btn-primary" ng-click="$modalSuccess()">{{$modalSuccessLabel}}</button>';e+='<button class="btn btn-primary" ng-click="$modalCancel()">{{$modalCancelLabel}}</button></div>';var s=angular.element('<div class="modal modal-body" style="display: block;"><div class="modal-dialog modal-sm"><div class="modal-content">'+l+e+"</div></div></div>"),c=arguments[0].scope||n.$new(),o=function(){t.unbind("keydown",d),s.remove()};switch(c.$modalClose=o,c.$modalSuccessLabel="OK",c.$modalCancelLabel="Cancel",arguments.length){case 2:c.$successCallback=angular.isFunction(arguments[1])?arguments[1]:null;break;case 3:c.$successCallback=angular.isFunction(arguments[1])?arguments[1]:null,c.$cancelCallback=angular.isFunction(arguments[2])?arguments[2]:null;break;case 4:c.$modalSuccessLabel=angular.isString(arguments[1])?arguments[1]:"OK",c.$modalCancelLabel=angular.isString(arguments[2])?arguments[2]:"Cancel",c.$successCallback=angular.isFunction(arguments[3])?arguments[3]:null;break;case 5:c.$modalSuccessLabel=angular.isString(arguments[1])?arguments[1]:"OK",c.$modalCancelLabel=angular.isString(arguments[2])?arguments[2]:"Cancel",c.$successCallback=angular.isFunction(arguments[3])?arguments[3]:null,c.$cancelCallback=angular.isFunction(arguments[4])?arguments[4]:null}var d=function(l){27===l.keyCode&&c.$modalClose()};t.bind("keydown",d),c.$modalSuccess=function(){void 0!=c.$successCallback&&c.$successCallback.call(null,null),c.$modalClose()},c.$modalCancel=function(){void 0!=c.$cancelCallback&&c.$cancelCallback.call(null,null),c.$modalClose()},a(s)(c),t.append(s)},c}]);